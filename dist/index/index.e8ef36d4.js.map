{"version":3,"file":"index/index.e8ef36d4.js","mappings":"kQAwBAA,GAAAA,EAAE,WAEgB,IAAIC,EAAAA,GAEL,IAAIC,EAAAA,GAEF,IAAIC,EAAAA,GAGT,IAAIC,EAAAA,EAGM,IAAIC,EAAAA,GACP,IAAIC,EAAAA,EAXvB,IAcMC,EAAYP,GAAAA,CAAE,+BACdQ,EAAeR,GAAAA,CAAE,sBACnBS,EAAU,KAIdD,EAAaE,GAAG,SAAS,SAACC,GACxB,IAAMC,GAAcC,EAAAA,EAAAA,IAAmB,mBAAoBF,EAAMG,QACjE,GAAKF,EAAL,CAEA,IAAMG,EAAOH,EAAYI,QAAQD,KACjCA,GAAQE,OAAOC,KAAKH,EAAM,aAK5B,IAAII,EAAYnB,GAAAA,CAAE,oBAGZoB,EAnCM,gFAoCV,WAEE,OADKD,EAAUE,SAAS,SAASF,EAAUG,SAAS,QAC7CF,IAtCC,kBAyCV,WAEE,OADID,EAAUE,SAAS,SAASF,EAAUI,YAAY,QAC/CH,IA3CC,oBA8CV,WAEE,OADAD,EAAUK,KAAK,sCACRJ,MAhDC,KAoDZ,SAASK,EAAYC,GACnB,IAAMC,EAAW,IAAAR,GAAS,KAATA,EAAe,SAASS,KAAK,QAC9C,GAAKD,EAEE,CACLP,EAAgBS,OAEhB,IAAMC,EAAW,CAAEC,IAAKJ,EAAUK,OAAQ,QAC1CC,EAAAA,EAAAA,GAAIH,GAAUI,MAAK,SAAAC,GACjB,IAAIC,EAAWpC,GAAAA,CAAE,eAAewB,KAAKW,GAKrC,GAJA3B,EAAa6B,OAAO,IAAAD,GAAQ,KAARA,EAAc,yCAGjB,IAAAA,GAAQ,KAARA,EAAc,oBAClBE,OAAQ,CACnB,IAAMC,EAAe,IAAAH,GAAQ,KAARA,EAAc,cACnCjB,EAAUqB,YAAYD,GACtBpB,EAAYoB,EAGZb,GAAWA,IAEXjB,GAAWA,EAAQgC,IAAI,IAAAjC,GAAY,KAAZA,EAAkB,uBAEzCY,EAAgBsB,SAASb,UAG1Bc,UAAM,SAAAC,GACPC,QAAQC,IAAIF,GAEZlB,GAAWA,YA3BbN,EAAgBsB,SAASb,OAkC7B,IAAIkB,EAAAA,EAGJ,IAAIC,EAAAA,EAGJ,IAAIC,EAAAA,EAAY,CAAEC,GAAI,CAAC,wCAIvBC,YAAW,WACL5C,EAAU+B,QAAQ/B,EAAU6C,SAC5B5C,EAAaa,SAAS,SAASb,EAAae,YAAY,QAG5Dd,EAAU,IAAI4C,EAAAA,EAAY,CAAEH,GAAI,qCAE3B,IAAA/B,GAAS,KAATA,EAAe,SAASmB,QAAQlB,EAAgBsB,SAASb,OAC9D,IAAIyB,EAAAA,EAAc,CAAEC,SAAU9B,MAC7B,U","sources":["webpack://jj/./src/pages/index/index.js"],"sourcesContent":["/*\r\n * @Author: mulingyuer\r\n * @Date: 2021-07-04 16:55:04\r\n * @LastEditTime: 2021-08-14 22:41:30\r\n * @LastEditors: mulingyuer\r\n * @Description: 首页\r\n * @FilePath: \\JJ\\src\\pages\\index\\index.js\r\n * 怎么可能会有bug！！！\r\n */\r\nimport \"./index.scss\";\r\n\r\n//js\r\nimport $ from \"jquery\";\r\nimport { MainNav, Search, BlogMenu, CollectHeader } from \"@/scripts/header\"; //header\r\nimport { Nav, CollectNav } from \"@/scripts/nav\";\r\nimport { specifyParentClass } from \"@/utils/tool\";\r\nimport ImgLazyload from \"@/packages/img-lazyload\";\r\nimport IllimitedLoad from \"@/packages/illimited-load\";\r\nimport api from \"@/packages/request\";\r\nimport LoginDialog from \"@/scripts/login-dialog\";\r\nimport BackTop from \"@/scripts/back-top\";\r\nimport FaceReplace from \"@/scripts/face-replace\";\r\n\r\n\r\n$(function () {\r\n  //导航菜单\r\n  const mianNav = new MainNav();\r\n  //搜索\r\n  const search = new Search();\r\n  //博客功能按钮\r\n  const blogMenu = new BlogMenu();\r\n\r\n  //导航按钮\r\n  const nav = new Nav();\r\n\r\n  //收起动画\r\n  const collectHeader = new CollectHeader();\r\n  const collectNav = new CollectNav();\r\n\r\n  //left内容  \r\n  const $skeleton = $('#mini-article-skeleton-wrap');\r\n  const $articleList = $('#article-list-wrap');\r\n  let imgLazy = null;  //图片懒加载实例\r\n\r\n\r\n  //文章卡片点击事件\r\n  $articleList.on('click', (event) => {\r\n    const articleCard = specifyParentClass('min-article-card', event.target);\r\n    if (!articleCard) return;  //不存在就跳过\r\n\r\n    const link = articleCard.dataset.link;\r\n    link && window.open(link, \"_self\");\r\n  })\r\n\r\n\r\n  //无限加载\r\n  let $autoLoad = $(\"#main .auto-load\");\r\n\r\n  //auto-load操作\r\n  class AutoLoadOperate {\r\n    static show() {\r\n      if (!$autoLoad.hasClass(\"show\")) $autoLoad.addClass(\"show\");\r\n      return AutoLoadOperate;\r\n    }\r\n\r\n    static hide() {\r\n      if ($autoLoad.hasClass(\"show\")) $autoLoad.removeClass(\"show\");\r\n      return AutoLoadOperate;\r\n    }\r\n\r\n    static noMore() {\r\n      $autoLoad.html('<span class=\"no-more\">没有更多了</span>');\r\n      return AutoLoadOperate;\r\n    }\r\n  }\r\n\r\n  function articleLoad(resetFn) {\r\n    const nextLink = $autoLoad.find(\".next\").attr(\"href\");\r\n    if (!nextLink) {\r\n      AutoLoadOperate.noMore().show();\r\n    } else {\r\n      AutoLoadOperate.show();\r\n      //请求\r\n      const postData = { url: nextLink, method: \"get\" };\r\n      api(postData).then(res => {\r\n        let $content = $(\"<div></div>\").html(res);  //创建dom\r\n        $articleList.append($content.find(\"#article-list-wrap .min-article-card\")); //插入dom\r\n\r\n        //更新auto-load\r\n        const $newNext = $content.find(\".auto-load .next\");\r\n        if ($newNext.length) {\r\n          const $newAutoLoad = $content.find(\".auto-load\");\r\n          $autoLoad.replaceWith($newAutoLoad);\r\n          $autoLoad = $newAutoLoad;\r\n\r\n          //恢复监听\r\n          resetFn && resetFn();\r\n          //图片懒加载\r\n          imgLazy && imgLazy.add($articleList.find(\"img[data-src]\"));\r\n        } else {\r\n          AutoLoadOperate.noMore().show();\r\n        }\r\n\r\n      }).catch(err => {\r\n        console.log(err);\r\n        //恢复监听\r\n        resetFn && resetFn();\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  //登录弹窗\r\n  new LoginDialog();\r\n\r\n  //返回顶部\r\n  new BackTop();\r\n\r\n  //表情替换\r\n  new FaceReplace({ el: [\"#main .recent-comment .recent-body\"] });\r\n\r\n\r\n  //骨架屏\r\n  setTimeout(() => {\r\n    if ($skeleton.length) $skeleton.remove();\r\n    if ($articleList.hasClass(\"hide\")) $articleList.removeClass(\"hide\");\r\n\r\n\r\n    imgLazy = new ImgLazyload({ el: \"#article-list-wrap img[data-src]\" }); //图片懒加载\r\n\r\n    if (!$autoLoad.find(\".next\").length) AutoLoadOperate.noMore().show();  //首次\r\n    new IllimitedLoad({ callback: articleLoad }); //无线加载\r\n  }, 300)\r\n\r\n\r\n\r\n});\r\n"],"names":["$","MainNav","Search","BlogMenu","Nav","CollectHeader","CollectNav","$skeleton","$articleList","imgLazy","on","event","articleCard","specifyParentClass","target","link","dataset","window","open","$autoLoad","AutoLoadOperate","hasClass","addClass","removeClass","html","articleLoad","resetFn","nextLink","attr","show","postData","url","method","api","then","res","$content","append","length","$newAutoLoad","replaceWith","add","noMore","catch","err","console","log","LoginDialog","BackTop","FaceReplace","el","setTimeout","remove","ImgLazyload","IllimitedLoad","callback"],"sourceRoot":""}